"use strict";(self.webpackChunkpatolimpiadas_casaes=self.webpackChunkpatolimpiadas_casaes||[]).push([[180],{3719:(e,a,r)=>{r.d(a,{A:()=>s});var t=r(5043),n=r(8185),o=r(579);const s=e=>{let{src:a,alt:r,variant:s,className:i,width:l,height:d}=e;const[c,u]=(0,t.useState)(!0);return(0,o.jsxs)("div",{className:"image-container",style:{position:"relative",width:l,height:d},children:[c&&(0,o.jsx)(n.A,{variant:s,width:l,height:d,style:{position:"absolute",top:0,left:0}}),(0,o.jsx)("img",{src:a,alt:r,className:i,onLoad:()=>u(!1),style:{display:c?"none":"block",borderRadius:"circular"===s?"50%":"",width:l,height:d}})]})}},6180:(e,a,r)=>{r.r(a),r.d(a,{default:()=>ee});var t=r(5043),n=r(6213),o=r(2314),s=r(5263),i=r(7392),l=r(5865),d=r(4669),c=r(4056),u=r(4010),h=r(7872),p=r(4109),m=r(3193),x=r(9190),g=r(1659),v=r(6990),j=r(1906),A=r(7332),f=r(4190),b=r(3216),y=r(3204),C=r(9573),k=r(6446),w=r(5795),S=r(4802),D=r(3719),I=r(1121),$=r(579);const P=e=>{let{open:a,handleClose:r,isEditing:t,currentDuck:n,houses:o,users:s,handleInputChange:d,handlePhotoChange:c,handleSubmit:u,handleDelete:h,submitting:p,apiBaseUrl:A,handleImageClick:f}=e;const b=n.foundDate?(0,I.GP)(new Date(n.foundDate),"yyyy-MM-dd'T'HH:mm"):"";return(0,$.jsx)(C.A,{open:a,onClose:r,"aria-labelledby":"modal-title","aria-describedby":"modal-description",sx:{display:"flex",alignItems:"center",justifyContent:"center",marginX:6,overflowY:"auto"},children:(0,$.jsxs)(k.A,{sx:{bgcolor:"background.paper",p:4,borderRadius:1,boxShadow:24,maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",position:"relative"},children:[(0,$.jsxs)(l.A,{id:"modal-title",variant:"h6",component:"h2",gutterBottom:!0,children:[t?"Edit Duck":"Add New Duck",(0,$.jsx)(i.A,{"aria-label":"close",onClick:r,sx:{position:"absolute",right:8,top:8},children:(0,$.jsx)(S.A,{})})]}),(0,$.jsxs)(k.A,{component:"form",onSubmit:u,children:[(0,$.jsx)(m.A,{fullWidth:!0,margin:"normal",children:(0,$.jsx)(w.A,{label:"Numero",type:"number",id:"duckNumber",name:"id",value:n.id,onChange:d,disabled:t,required:!0})}),(0,$.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,$.jsx)(x.A,{id:"duckType-label",children:"Tipo"}),(0,$.jsxs)(g.A,{labelId:"duckType-label",id:"duckType",name:"type",value:n.type,onChange:d,required:!0,children:[(0,$.jsx)(v.A,{value:"normal",children:"Normal"}),(0,$.jsx)(v.A,{value:"oclinhos",children:"Oclinhos"})]})]}),(0,$.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,$.jsx)(x.A,{id:"duckHouse-label",children:"Casa"}),(0,$.jsx)(g.A,{labelId:"duckHouse-label",id:"duckHouse",name:"houseId",value:n.houseId,onChange:d,required:!0,children:o.map((e=>(0,$.jsx)(v.A,{value:e._id,children:e.name},e._id)))})]}),(0,$.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,$.jsx)(x.A,{id:"duckUser-label",children:"User"}),(0,$.jsx)(g.A,{labelId:"duckUser-label",id:"duckUser",name:"userId",value:n.userId,onChange:d,required:!0,children:s.map((e=>(0,$.jsx)(v.A,{value:e._id,children:e.username},e._id)))})]}),n.found&&(0,$.jsx)(m.A,{fullWidth:!0,margin:"normal",children:(0,$.jsx)(w.A,{label:"Data Encontrado",type:"datetime-local",id:"foundDate",name:"foundDate",value:b,onChange:d,InputLabelProps:{shrink:!0}})}),(0,$.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,$.jsxs)(j.A,{variant:"contained",component:"label",children:["Upload Photo",(0,$.jsx)("input",{type:"file",hidden:!0,id:"duckPhoto",name:"photo",accept:"image/*",onChange:c})]}),n.photo&&(0,$.jsx)(k.A,{mt:2,sx:{textAlign:"center"},onClick:()=>f(n),children:n.photo instanceof File?(0,$.jsx)(D.A,{src:URL.createObjectURL(n.photo),alt:"Duck Preview",variant:"retangular",className:"duck-image-preview",height:"200px"}):(0,$.jsx)(D.A,{src:`${A}/${n.photo.replace(/\\/g,"/")}`,variant:"retangular",alt:"Duck Preview",className:"duck-image-preview",height:"200px",onClick:()=>f(n)})})]}),(0,$.jsx)(j.A,{type:"submit",variant:"contained",color:"success",fullWidth:!0,sx:{mt:3},disabled:p,children:p?"Saving...":t?"Update Duck":"Add Duck"}),t&&(0,$.jsx)(j.A,{variant:"contained",color:"error",fullWidth:!0,sx:{mt:2},onClick:h,children:"Delete Duck"})]})]})})},E=e=>{let{open:a,handleClose:r,isEditing:t,currentHouse:n,handleInputChange:o,handleSubmit:s,handleDelete:d,submitting:c}=e;return(0,$.jsx)(C.A,{open:a,onClose:r,"aria-labelledby":"modal-title","aria-describedby":"modal-description",sx:{display:"flex",alignItems:"center",justifyContent:"center",marginX:6,overflowY:"auto"},children:(0,$.jsxs)(k.A,{sx:{bgcolor:"background.paper",p:4,borderRadius:1,boxShadow:24,maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",position:"relative"},children:[(0,$.jsxs)(l.A,{id:"modal-title",variant:"h6",component:"h2",gutterBottom:!0,children:[t?"Edit House":"Add New House",(0,$.jsx)(i.A,{"aria-label":"close",onClick:r,sx:{position:"absolute",right:8,top:8},children:(0,$.jsx)(S.A,{})})]}),(0,$.jsxs)(k.A,{component:"form",onSubmit:s,children:[(0,$.jsx)(m.A,{fullWidth:!0,margin:"normal",children:(0,$.jsx)(w.A,{label:"Name",type:"text",id:"houseName",name:"name",value:n.name,onChange:o,required:!0})}),(0,$.jsx)(m.A,{fullWidth:!0,margin:"normal",children:(0,$.jsx)(w.A,{label:"Address",type:"text",id:"houseAddress",name:"address",value:n.address,onChange:o})}),(0,$.jsx)(j.A,{type:"submit",variant:"contained",color:"success",fullWidth:!0,sx:{mt:3},disabled:c,children:c?"Saving...":t?"Update House":"Add House"}),t&&(0,$.jsx)(j.A,{variant:"contained",color:"error",fullWidth:!0,sx:{mt:2},onClick:d,children:"Delete House"})]})]})})},U=e=>{let{open:a,onClose:r,isEditing:t,currentUser:n,houses:o,onInputChange:s,handlePhotoChange:d,onSubmit:c,onDelete:u,submitting:h,apiBaseUrl:p}=e;return(0,$.jsx)(C.A,{open:a,onClose:r,"aria-labelledby":"modal-title","aria-describedby":"modal-description",sx:{display:"flex",alignItems:"center",justifyContent:"center",marginX:6,overflowY:"auto"},children:(0,$.jsxs)(k.A,{sx:{bgcolor:"background.paper",p:4,borderRadius:1,boxShadow:24,maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",position:"relative"},children:[(0,$.jsxs)(l.A,{id:"modal-title",variant:"h6",component:"h2",gutterBottom:!0,children:[t?"Edit User":"Add New User",(0,$.jsx)(i.A,{"aria-label":"close",onClick:r,sx:{position:"absolute",right:8,top:8},children:(0,$.jsx)(S.A,{})})]}),(0,$.jsxs)(k.A,{component:"form",onSubmit:c,children:[(0,$.jsx)(m.A,{fullWidth:!0,margin:"normal",children:(0,$.jsx)(w.A,{label:"Username",id:"username",name:"username",value:n.username,onChange:s,required:!0})}),(0,$.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,$.jsx)(x.A,{id:"house-label",children:"House"}),(0,$.jsx)(g.A,{labelId:"house-label",id:"houseId",name:"houseId",value:n.houseId,onChange:s,required:!0,children:o.map((e=>(0,$.jsx)(v.A,{value:e._id,children:e.name},e._id)))})]}),(0,$.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,$.jsxs)(j.A,{variant:"contained",component:"label",children:["Upload Profile Picture",(0,$.jsx)("input",{type:"file",hidden:!0,id:"profilePicture",name:"profilePicture",accept:"image/*",onChange:d})]}),n.profilePicture&&(0,$.jsx)(k.A,{mt:2,sx:{textAlign:"center"},children:n.profilePicture instanceof File?(0,$.jsx)(D.A,{src:URL.createObjectURL(n.profilePicture),alt:"Duck Preview",variant:"retangular",className:"duck-image-preview",height:"200px"}):(0,$.jsx)(D.A,{src:`${p}/${n.profilePicture.replace(/\\/g,"/")}`,variant:"retangular",alt:"Duck Preview",className:"duck-image-preview",height:"200px"})})]}),(0,$.jsx)(j.A,{type:"submit",variant:"contained",color:"success",fullWidth:!0,sx:{mt:3},disabled:h,children:h?"Saving...":t?"Update User":"Add User"}),t&&(0,$.jsx)(j.A,{variant:"contained",color:"error",fullWidth:!0,sx:{mt:2},onClick:u,children:"Delete User"})]})]})})};var _=r(5721),W=r(4628),N=r(8734),T=r(8185),F=r(8266);const H=e=>{let{loading:a,items:r,type:t,onEdit:n,apiBaseUrl:o,placeholderImage:s="https://via.placeholder.com/40"}=e;return(0,$.jsx)(_.A,{sx:{mt:4},children:a?Array.from(new Array(5)).map(((e,a)=>(0,$.jsxs)(W.Ay,{className:"admin-list-item",children:[(0,$.jsx)(N.A,{primary:(0,$.jsx)(T.A,{variant:"text",width:"40%",height:30}),secondary:(0,$.jsx)($.Fragment,{children:(0,$.jsx)(T.A,{variant:"text",width:"60%",height:20})})}),(0,$.jsx)(F.A,{children:(0,$.jsx)(T.A,{variant:"circular",width:40,height:40})})]},a))):r.map((e=>{var a,r;return(0,$.jsxs)(W.Ay,{className:"admin-list-item",sx:{cursor:"pointer"},onClick:()=>n(e),children:[(0,$.jsx)(N.A,{primary:(0,$.jsx)(l.A,{variant:"h5",children:"duck"===t?`Pato ${e.id}`:e.username||e.name}),secondary:"duck"===t?(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["Casa: ",null===(a=e.house)||void 0===a?void 0:a.name]}),(0,$.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["Participante: ",null===(r=e.user)||void 0===r?void 0:r.username]}),(0,$.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["Tipo: ",e.type]}),(0,$.jsx)(l.A,{variant:"body2",color:e.found?"success.main":"error.main",children:e.found&&e.foundDate?`Encontrado em ${(0,I.GP)(new Date(e.foundDate),"dd/MM/yyyy HH:mm")}`:e.found?"Encontrado, data indispon\xedvel":"Escondido"})]}):null}),"duck"===t||"user"===t?(0,$.jsx)(F.A,{children:(0,$.jsx)(D.A,{src:"duck"===t?e.photo?`${o}/${e.photo.replace(/\\/g,"/")}`:s:"user"===t?e.profilePicture?`${o}/${e.profilePicture.replace(/\\/g,"/")}`:s:null,alt:"duck"===t?`Duck ${e.id}`:e.username||e.name,variant:"circular",className:`${t}-image`,width:40,height:40})}):null]},e._id)}))})};var R=r(7029),B=r.n(R),q=r(547),L=r(1637),M=r(3995),O=r(2429),Y=r(8911),z=r(7141);const G=e=>{let{open:a,handleClose:r,onUploadSuccess:o}=e;const[s,l]=(0,t.useState)(null),[d,c]=(0,t.useState)(""),u=(0,t.useRef)(null),[h,p]=(0,t.useState)(!1),[m,x]=(0,t.useState)([]),[g,v]=(0,t.useState)(""),[j,A]=(0,t.useState)(""),[f,b]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)try{const e=await navigator.mediaDevices.getUserMedia({video:!0}),a=(await navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind)),r=a.filter((e=>e.label.toLowerCase().includes("back")));r.length>0?(x(r),v(r[0].deviceId)):a.length>0?v(a[0].deviceId):A("Nenhuma c\xe2mera dispon\xedvel!"),e.getTracks().forEach((e=>e.stop()))}catch(e){A("Permiss\xe3o da c\xe2mera negada ou erro ao acessar a c\xe2mera."),console.error("Camera permission error:",e)}else A("Navegador n\xe3o suporta o acesso \xe0 c\xe2mera.")})()}),[]);return(0,$.jsx)(C.A,{open:a,onClose:r,sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,$.jsxs)(k.A,{sx:{bgcolor:"background.paper",p:4,borderRadius:1,boxShadow:24,width:"400px",textAlign:"center"},children:[f&&(0,$.jsx)(q.A,{severity:"success",sx:{mt:2,mb:2},children:f}),s?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("img",{src:s,alt:"Captured Duck",style:{width:"100%",borderRadius:"8px"}}),(0,$.jsx)(w.A,{label:"Numero do Pato",type:"number",fullWidth:!0,value:d,onChange:e=>{c(e.target.value),A(""),b("")},sx:{mt:2},required:!0}),j&&(0,$.jsx)(q.A,{severity:"error",sx:{mt:2,mb:2},children:j}),(0,$.jsxs)(k.A,{sx:{display:"flex",justifyContent:"center",mt:2},children:[(0,$.jsx)(i.A,{onClick:()=>l(null),disabled:h,sx:{backgroundColor:"var(--primary-color)","&:hover":{backgroundColor:"var(--primary-color-hover)"},color:"white",borderRadius:"50%",padding:"16px"},children:(0,$.jsx)(Y.A,{sx:{fontSize:40}})}),(0,$.jsx)(i.A,{onClick:async()=>{if(d&&s){p(!0),A(""),b("");try{const e=new FormData,a=await fetch(s).then((e=>e.blob()));e.append("photo",new File([a],"duck-photo.jpg",{type:"image/jpeg"})),await n.A.put(`https://api.cadeopato.app.br/ducks/image/${d}`,e,{headers:{"Content-Type":"multipart/form-data"}}),b(`Pato ${d} mudou de visual!`),l(null),c("")}catch(e){e.response&&404===e.response.status?A(`Pato ${d} n\xe3o encontrado!`):e.response?A("Erro ao carregar a foto. Tente novamente."):A("Erro de rede. Verifique sua conex\xe3o.")}finally{p(!1)}}else A("N\xfamero do pato ou foto ausente.")},disabled:h,sx:{backgroundColor:h?"gray":"var(--success-color)","&:hover":{backgroundColor:h?"gray":"var(--primary-color-hover)"},color:"white",borderRadius:"50%",padding:"16px",marginLeft:"16px"},children:h?(0,$.jsx)(L.A,{size:24}):(0,$.jsx)(z.A,{sx:{fontSize:40}})})]})]}):(0,$.jsxs)($.Fragment,{children:[g&&(0,$.jsx)(B(),{audio:!1,ref:u,screenshotFormat:"image/jpeg",width:"100%",videoConstraints:{deviceId:g}}),(0,$.jsxs)(k.A,{sx:{display:"flex",justifyContent:"center",mt:2},children:[m.length>1&&(0,$.jsx)(i.A,{onClick:()=>{if(m.length>1){const e=(m.findIndex((e=>e.deviceId===g))+1)%m.length;v(m[e].deviceId)}},sx:{backgroundColor:"var(--secondary-color)","&:hover":{backgroundColor:"var(--primary-color-hover)"},color:"white",borderRadius:"50%",padding:"16px"},children:(0,$.jsx)(M.A,{sx:{fontSize:40}})}),(0,$.jsx)(i.A,{onClick:()=>{const e=u.current.getScreenshot();e?(l(e),b("")):A("Erro ao capturar a foto. Tente novamente.")},sx:{backgroundColor:"var(--accent-color)","&:hover":{backgroundColor:"var(--primary-color-hover)"},color:"white",borderRadius:"50%",marginLeft:"16px",padding:"16px"},children:(0,$.jsx)(O.A,{sx:{fontSize:40}})})]})]})]})})};var X=r(6236);const J=e=>{let{open:a,handleClose:r,duck:n,apiBaseUrl:o,onClueSubmit:s}=e;const[d,c]=(0,t.useState)({clue:"",answer:"",solved:!1}),[u,h]=(0,t.useState)(!1),[p,x]=(0,t.useState)(!1);(0,t.useEffect)((()=>{var e;if((null===n||void 0===n||null===(e=n.clues)||void 0===e?void 0:e.length)>0){h(!0);const e=n.clues[0];c({clue:e.clue,answer:e.answer,solved:e.solved||!1})}else h(!1),c({clue:"",answer:"",solved:!1})}),[n]);const g=e=>{const{name:a,value:r}=e.target;c((e=>({...e,[a]:r})))};return(0,$.jsx)(C.A,{open:a,onClose:r,"aria-labelledby":"clue-modal-title",sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,$.jsxs)(k.A,{sx:{bgcolor:"background.paper",p:4,borderRadius:1,boxShadow:24,maxWidth:"600px",width:"90%",textAlign:"center",position:"relative"},children:[(0,$.jsxs)(l.A,{id:"clue-modal-title",variant:"h6",gutterBottom:!0,children:["Clues for Duck #",null===n||void 0===n?void 0:n.id,(0,$.jsx)(i.A,{"aria-label":"close",onClick:r,sx:{position:"absolute",top:8,right:8},children:(0,$.jsx)(S.A,{})})]}),(null===n||void 0===n?void 0:n.photo)&&(0,$.jsx)(X.A,{mb:3,onClick:()=>{x(!p)},children:(0,$.jsx)(k.A,{children:(0,$.jsx)(D.A,{src:`${o}/${n.photo.replace(/\\/g,"/")}`,alt:`Duck ${n.id}`,variant:"rectangular",width:p?"100%":"200px"})})}),(0,$.jsx)(m.A,{fullWidth:!0,margin:"normal",children:(0,$.jsx)(w.A,{label:"Clue",name:"clue",value:d.clue,onChange:g,multiline:!0,rows:3,required:!0})}),(0,$.jsx)(m.A,{fullWidth:!0,margin:"normal",children:(0,$.jsx)(w.A,{label:"Answer",name:"answer",value:d.answer,onChange:g,required:!0})}),(0,$.jsx)(m.A,{fullWidth:!0,margin:"normal",children:(0,$.jsxs)("label",{children:[(0,$.jsx)("input",{type:"checkbox",checked:d.solved,onChange:e=>{c((a=>({...a,solved:e.target.checked})))}}),"Solved"]})}),(0,$.jsx)(j.A,{variant:"contained",color:"primary",onClick:async()=>{const{clue:e,answer:a,solved:t}=d;if(e&&a)try{const i=u?`${o}/clues/${n.clues[0]._id}`:`${o}/ducks/${n._id}/clues`,l=u?"PUT":"POST",d=await fetch(i,{method:l,headers:{"Content-Type":"application/json"},body:JSON.stringify({clue:e,answer:a,solved:t})});if(d.ok){const e=await d.json();s(e),r()}}catch(i){console.error("Error handling clue:",i)}},disabled:!d.clue||!d.answer,sx:{mt:2},children:u?"Update Clue":"Submit Clue"})]})})},V="https://api.cadeopato.app.br",Z=async(e,a)=>{try{const a=(await n.A.get(`${V}/ducks`)).data;return e(a),a}catch(r){return console.error("Error fetching ducks:",r),[]}finally{a(!1)}},K=async(e,a)=>{try{const a=(await n.A.get(`${V}/houses`)).data;return e(a),a}catch(r){return console.error("Error fetching houses:",r),[]}finally{a(!1)}},Q=async(e,a)=>{try{const a=(await n.A.get(`${V}/users`)).data;return e(a),a}catch(r){return console.error("Error fetching users:",r),[]}finally{a(!1)}},ee=()=>{const[e,a]=(0,t.useState)([]),[r,C]=(0,t.useState)([]),[k,w]=(0,t.useState)([]),[S,D]=(0,t.useState)({id:"",type:"",houseId:"",photo:"",userId:"",foundDate:""}),[I,_]=(0,t.useState)({name:"",address:""}),[W,N]=(0,t.useState)({username:"",houseId:"",profilePicture:""}),[T,F]=(0,t.useState)(0),[R,B]=(0,t.useState)(!1),[q,L]=(0,t.useState)(!1),[M,O]=(0,t.useState)(!1),[Y,z]=(0,t.useState)(!1),[X,ee]=(0,t.useState)(!1),[ae,re]=(0,t.useState)(!1),[te,ne]=(0,t.useState)(!0),[oe,se]=(0,t.useState)(!1),[ie,le]=(0,t.useState)(!1),[de,ce]=(0,t.useState)(!1),[ue,he]=(0,t.useState)([]),[pe,me]=(0,t.useState)(!1),[xe,ge]=(0,t.useState)(""),[ve,je]=(0,t.useState)(""),[Ae,fe]=(0,t.useState)("all"),[be,ye]=(0,t.useState)("all"),[Ce,ke]=(0,t.useState)(!1),[we,Se]=(0,t.useState)(!1),[De,Ie]=(0,t.useState)(null),$e=(0,b.Zp)();(0,t.useEffect)((()=>{sessionStorage.getItem("isAdminAuthenticated")||$e("/")}),[$e]),(0,t.useEffect)((()=>{(async()=>{K(C,ne),Q(w,ne);await Z(a,ne)})()}),[]),(0,t.useEffect)((()=>{Pe()}),[xe,ve,Ae,be,e]);const Pe=()=>{let a=e;xe&&(a=a.filter((e=>e.user&&e.user._id===xe))),ve&&(a=a.filter((e=>e.house&&e.house._id===ve))),"found"===Ae?a=a.filter((e=>!0===e.found)):"not_found"===Ae&&(a=a.filter((e=>!1===e.found))),"solved"===be?a=a.filter((e=>e.clues&&e.clues.some((e=>e.solved)))):"unsolved"===be&&(a=a.filter((e=>e.clues&&e.clues.some((e=>!e.solved))))),he(a)},Ee=()=>{D({userId:"",houseId:"",id:"",type:"normal",found:!1}),B(!1),z(!0)},Ue=()=>{_({name:"",address:""}),L(!1),ee(!0)},_e=()=>{N({username:"",houseId:"",profilePicture:""}),O(!1),re(!0)},We=()=>{ke(!Ce)};return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(o.A,{className:"Appbar",position:"sticky",color:"default",children:[(0,$.jsxs)(s.A,{children:[(0,$.jsx)(i.A,{edge:"start",color:"inherit","aria-label":"back",onClick:()=>$e(-1),children:(0,$.jsx)(A.A,{})}),(0,$.jsx)(l.A,{component:"div",sx:{flexGrow:1,alignItems:"center",textAlign:"center"},children:(0,$.jsx)("h2",{style:{margin:0},children:"Admin"})}),0===T&&(0,$.jsx)(i.A,{color:"inherit","aria-label":"filter",onClick:We,children:(0,$.jsx)(f.A,{})})]}),(0,$.jsxs)(d.A,{value:T,onChange:async(e,r)=>{switch(F(r),r){case 0:await Z(a,ne);break;case 1:const e=await Q(w,ne);he(e);break;case 2:const r=await K(C,ne);he(r)}},"aria-label":"Admin Tabs",centered:!0,indicatorColor:"primary",sx:{"& .MuiTab-root":{color:"var(--text-color)",fontFamily:"var(--font-family)","&.Mui-selected":{color:"var(--primary-color)",fontWeight:"bold"}},"& .MuiTabs-indicator":{backgroundColor:"var(--primary-color)",height:"4px"}},children:[(0,$.jsx)(c.A,{label:"Patos"}),(0,$.jsx)(c.A,{label:"Participantes"}),(0,$.jsx)(c.A,{label:"Casas"})]})]}),(0,$.jsx)(u.A,{color:"primary","aria-label":"add",onClick:e=>{0===T?Ee():1===T?_e():Ue()},sx:{position:"fixed",bottom:16,right:16,backgroundColor:"var(--accent-color)","&:hover":{backgroundColor:"var(--primary-color-hover)"},color:"white"},children:(0,$.jsx)(y.OiG,{})}),(0,$.jsx)(u.A,{color:"primary","aria-label":"camera",onClick:()=>{me(!0)},sx:{position:"fixed",bottom:100,right:16,backgroundColor:"var(--accent-color)","&:hover":{backgroundColor:"var(--primary-color-hover)"},color:"white"},children:(0,$.jsx)(y.p5B,{})}),(0,$.jsx)(P,{open:Y,handleClose:()=>z(!1),isEditing:R,currentDuck:S,houses:r,users:k,handleInputChange:e=>{const{name:a,value:r}=e.target;D({...S,[a]:r})},handlePhotoChange:e=>{const a=e.target.files[0];a&&D({...S,photo:a})},handleSubmit:async e=>{e.preventDefault(),se(!0);try{const e=new FormData;e.append("id",S.id),e.append("type",S.type),e.append("houseId",S.houseId),e.append("userId",S.userId),e.append("foundDate",S.foundDate),S.photo instanceof File&&e.append("photo",S.photo),R?await n.A.put(`${V}/ducks/${S._id}`,e,{headers:{"Content-Type":"multipart/form-data"}}):(e.append("found",!1),await n.A.post(`${V}/ducks`,e,{headers:{"Content-Type":"multipart/form-data"}})),await Z(a,ne),z(!1)}catch(r){console.error("Error saving duck:",r)}finally{se(!1)}},handleDelete:async()=>{try{await n.A.delete(`${V}/ducks/${S._id}`),await Z(a,ne),z(!1)}catch(e){console.error("Error deleting duck:",e)}},submitting:oe,apiBaseUrl:V,handleImageClick:e=>{Ie(e),Se(!0)}}),(0,$.jsx)(E,{open:X,handleClose:()=>ee(!1),isEditing:q,currentHouse:I,handleInputChange:e=>{const{name:a,value:r}=e.target;_({...I,[a]:r})},handleSubmit:async e=>{e.preventDefault(),le(!0);try{q?await n.A.put(`${V}/houses/${I._id}`,I):await n.A.post(`${V}/houses`,I);const e=await K(C,ne);2===T&&he(e),ee(!1)}catch(a){console.error("Error saving house:",a)}finally{le(!1)}},handleDelete:async()=>{try{await n.A.delete(`${V}/houses/${I._id}`);const e=await K(C,ne);2===T&&he(e),ee(!1)}catch(e){console.error("Error deleting house:",e)}},submitting:ie}),(0,$.jsx)(U,{open:ae,onClose:()=>re(!1),isEditing:M,currentUser:W,houses:r,onInputChange:e=>{const{name:a,value:r}=e.target;N({...W,[a]:r})},handlePhotoChange:e=>{const a=e.target.files[0];a&&N({...W,profilePicture:a})},onSubmit:async e=>{e.preventDefault(),ce(!0);try{const e=new FormData;e.append("username",W.username),e.append("houseId",W.houseId),W.profilePicture instanceof File&&e.append("profilePicture",W.profilePicture),M?await n.A.put(`${V}/users/${W._id}`,e,{headers:{"Content-Type":"multipart/form-data"}}):await n.A.post(`${V}/users`,e,{headers:{"Content-Type":"multipart/form-data"}});const a=await Q(w,ne);1===T&&he(a),re(!1)}catch(a){console.error("Error saving user:",a)}finally{ce(!1)}},onDelete:async()=>{try{await n.A.delete(`${V}/users/${W._id}`);const e=await Q(w,ne);1===T&&he(e),re(!1)}catch(e){console.error("Error deleting user:",e)}},submitting:de,apiBaseUrl:V}),(0,$.jsx)(G,{open:pe,handleClose:()=>{me(!1)},onUploadSuccess:()=>{me(!1)}}),(0,$.jsx)(J,{open:we,handleClose:()=>Se(!1),duck:De,apiBaseUrl:V,onClueSubmit:async e=>{if(De)try{await n.A.post(`${V}/ducks/${De._id}/clues`,e);Se(!1)}catch(a){console.error("Error submitting clue:",a)}}}),(0,$.jsxs)(h.A,{children:[(0,$.jsx)(p.Ay,{anchor:"right",open:Ce,onClose:We,variant:"temporary",children:(0,$.jsxs)("div",{style:{width:250,padding:16},children:[(0,$.jsx)(l.A,{variant:"h6",children:"Filters"}),(0,$.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,$.jsx)(x.A,{children:"User"}),(0,$.jsxs)(g.A,{value:xe,onChange:e=>ge(e.target.value),children:[(0,$.jsx)(v.A,{value:"",children:(0,$.jsx)("em",{children:"All"})}),k.map((e=>(0,$.jsx)(v.A,{value:e._id,children:e.username},e._id)))]})]}),(0,$.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,$.jsx)(x.A,{children:"House"}),(0,$.jsxs)(g.A,{value:ve,onChange:e=>je(e.target.value),children:[(0,$.jsx)(v.A,{value:"",children:(0,$.jsx)("em",{children:"All"})}),r.map((e=>(0,$.jsx)(v.A,{value:e._id,children:e.name},e._id)))]})]}),(0,$.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,$.jsx)(x.A,{children:"Status"}),(0,$.jsxs)(g.A,{value:Ae,onChange:e=>fe(e.target.value),children:[(0,$.jsx)(v.A,{value:"all",children:"All"}),(0,$.jsx)(v.A,{value:"found",children:"Found"}),(0,$.jsx)(v.A,{value:"not_found",children:"Not Found"})]})]}),(0,$.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,$.jsx)(x.A,{children:"Status da Charada"}),(0,$.jsxs)(g.A,{value:be,onChange:e=>ye(e.target.value),children:[(0,$.jsx)(v.A,{value:"all",children:"Todos"}),(0,$.jsx)(v.A,{value:"solved",children:"Resolvidos"}),(0,$.jsx)(v.A,{value:"unsolved",children:"N\xe3o Resolvidos"})]})]}),(0,$.jsx)(j.A,{variant:"outlined",onClick:()=>{ge(""),je(""),fe("all"),ye("all")},fullWidth:!0,children:"Clear Filters"})]})}),(0,$.jsx)(H,{loading:te,items:ue,type:0===T?"duck":1===T?"user":"house",onEdit:0===T?e=>{D({_id:e._id,userId:e.user?e.user._id:"",houseId:e.house?e.house._id:"",id:e.id,type:e.type,photo:e.photo,found:e.found,foundDate:e.foundDate,clues:e.clues}),B(!0),z(!0)}:1===T?e=>{N({_id:e._id,username:e.username,houseId:e.house?e.house._id:"",profilePicture:e.profilePicture}),O(!0),re(!0)}:e=>{_(e),L(!0),ee(!0)},apiBaseUrl:V})]})]})}}}]);
//# sourceMappingURL=180.2648f721.chunk.js.map
"use strict";(self.webpackChunkpatolimpiadas_casaes=self.webpackChunkpatolimpiadas_casaes||[]).push([[179],{3719:(e,a,t)=>{t.d(a,{A:()=>n});var r=t(5043),i=t(8185),s=t(579);const n=e=>{let{src:a,alt:t,variant:n,className:o,width:l,height:d}=e;const[c,u]=(0,r.useState)(!0);return(0,s.jsxs)("div",{className:"image-container",style:{position:"relative",width:l,height:d},children:[c&&(0,s.jsx)(i.A,{variant:n,width:l,height:d,style:{position:"absolute",top:0,left:0}}),(0,s.jsx)("img",{src:a,alt:t,className:o,onLoad:()=>u(!1),style:{display:c?"none":"block",borderRadius:"circular"===n?"50%":"",width:l,height:d}})]})}},179:(e,a,t)=>{t.r(a),t.d(a,{default:()=>R});var r=t(5043),i=t(6213),s=t(2314),n=t(5263),o=t(7392),l=t(5865),d=t(4669),c=t(4056),u=t(4010),h=t(7872),p=t(7332),m=t(3216),x=t(3204),g=t(9573),A=t(6446),j=t(3193),b=t(5795),v=t(9190),f=t(1659),y=t(6990),k=t(1906),w=t(4802),C=t(3719),I=t(579);const S=e=>{let{open:a,handleClose:t,isEditing:r,currentDuck:i,houses:s,users:n,handleInputChange:d,handlePhotoChange:c,handleSubmit:u,handleDelete:h,submitting:p,apiBaseUrl:m}=e;return(0,I.jsx)(g.A,{open:a,onClose:t,"aria-labelledby":"modal-title","aria-describedby":"modal-description",sx:{display:"flex",alignItems:"center",justifyContent:"center",marginX:6,overflowY:"auto"},children:(0,I.jsxs)(A.A,{sx:{bgcolor:"background.paper",p:4,borderRadius:1,boxShadow:24,maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",position:"relative"},children:[(0,I.jsxs)(l.A,{id:"modal-title",variant:"h6",component:"h2",gutterBottom:!0,children:[r?"Edit Duck":"Add New Duck",(0,I.jsx)(o.A,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:8,top:8},children:(0,I.jsx)(w.A,{})})]}),(0,I.jsxs)(A.A,{component:"form",onSubmit:u,children:[(0,I.jsx)(j.A,{fullWidth:!0,margin:"normal",children:(0,I.jsx)(b.A,{label:"Numero",type:"number",id:"duckNumber",name:"id",value:i.id,onChange:d,disabled:r,required:!0})}),(0,I.jsxs)(j.A,{fullWidth:!0,margin:"normal",children:[(0,I.jsx)(v.A,{id:"duckType-label",children:"Tipo"}),(0,I.jsxs)(f.A,{labelId:"duckType-label",id:"duckType",name:"type",value:i.type,onChange:d,required:!0,children:[(0,I.jsx)(y.A,{value:"normal",children:"Normal"}),(0,I.jsx)(y.A,{value:"oclinhos",children:"Oclinhos"})]})]}),(0,I.jsxs)(j.A,{fullWidth:!0,margin:"normal",children:[(0,I.jsx)(v.A,{id:"duckHouse-label",children:"Casa"}),(0,I.jsx)(f.A,{labelId:"duckHouse-label",id:"duckHouse",name:"houseId",value:i.houseId,onChange:d,required:!0,children:s.map((e=>(0,I.jsx)(y.A,{value:e._id,children:e.name},e._id)))})]}),(0,I.jsxs)(j.A,{fullWidth:!0,margin:"normal",children:[(0,I.jsx)(v.A,{id:"duckUser-label",children:"User"}),(0,I.jsx)(f.A,{labelId:"duckUser-label",id:"duckUser",name:"userId",value:i.userId,onChange:d,required:!0,children:n.map((e=>(0,I.jsx)(y.A,{value:e._id,children:e.username},e._id)))})]}),(0,I.jsxs)(j.A,{fullWidth:!0,margin:"normal",children:[(0,I.jsxs)(k.A,{variant:"contained",component:"label",children:["Upload Photo",(0,I.jsx)("input",{type:"file",hidden:!0,id:"duckPhoto",name:"photo",accept:"image/*",onChange:c})]}),i.photo&&(0,I.jsx)(A.A,{mt:2,sx:{textAlign:"center"},children:i.photo instanceof File?(0,I.jsx)(C.A,{src:URL.createObjectURL(i.photo),alt:"Duck Preview",variant:"retangular",className:"duck-image-preview",height:"200px"}):(0,I.jsx)(C.A,{src:`${m}/${i.photo.replace(/\\/g,"/")}`,variant:"retangular",alt:"Duck Preview",className:"duck-image-preview",height:"200px"})})]}),(0,I.jsx)(k.A,{type:"submit",variant:"contained",color:"success",fullWidth:!0,sx:{mt:3},disabled:p,children:p?"Saving...":r?"Update Duck":"Add Duck"}),r&&(0,I.jsx)(k.A,{variant:"contained",color:"error",fullWidth:!0,sx:{mt:2},onClick:h,children:"Delete Duck"})]})]})})},P=e=>{let{open:a,handleClose:t,isEditing:r,currentHouse:i,handleInputChange:s,handleSubmit:n,handleDelete:d,submitting:c}=e;return(0,I.jsx)(g.A,{open:a,onClose:t,"aria-labelledby":"modal-title","aria-describedby":"modal-description",sx:{display:"flex",alignItems:"center",justifyContent:"center",marginX:6,overflowY:"auto"},children:(0,I.jsxs)(A.A,{sx:{bgcolor:"background.paper",p:4,borderRadius:1,boxShadow:24,maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",position:"relative"},children:[(0,I.jsxs)(l.A,{id:"modal-title",variant:"h6",component:"h2",gutterBottom:!0,children:[r?"Edit House":"Add New House",(0,I.jsx)(o.A,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:8,top:8},children:(0,I.jsx)(w.A,{})})]}),(0,I.jsxs)(A.A,{component:"form",onSubmit:n,children:[(0,I.jsx)(j.A,{fullWidth:!0,margin:"normal",children:(0,I.jsx)(b.A,{label:"Name",type:"text",id:"houseName",name:"name",value:i.name,onChange:s,required:!0})}),(0,I.jsx)(j.A,{fullWidth:!0,margin:"normal",children:(0,I.jsx)(b.A,{label:"Address",type:"text",id:"houseAddress",name:"address",value:i.address,onChange:s})}),(0,I.jsx)(k.A,{type:"submit",variant:"contained",color:"success",fullWidth:!0,sx:{mt:3},disabled:c,children:c?"Saving...":r?"Update House":"Add House"}),r&&(0,I.jsx)(k.A,{variant:"contained",color:"error",fullWidth:!0,sx:{mt:2},onClick:d,children:"Delete House"})]})]})})},$=e=>{let{open:a,onClose:t,isEditing:r,currentUser:i,houses:s,onInputChange:n,handlePhotoChange:d,onSubmit:c,onDelete:u,submitting:h,apiBaseUrl:p}=e;return(0,I.jsx)(g.A,{open:a,onClose:t,"aria-labelledby":"modal-title","aria-describedby":"modal-description",sx:{display:"flex",alignItems:"center",justifyContent:"center",marginX:6,overflowY:"auto"},children:(0,I.jsxs)(A.A,{sx:{bgcolor:"background.paper",p:4,borderRadius:1,boxShadow:24,maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",position:"relative"},children:[(0,I.jsxs)(l.A,{id:"modal-title",variant:"h6",component:"h2",gutterBottom:!0,children:[r?"Edit User":"Add New User",(0,I.jsx)(o.A,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:8,top:8},children:(0,I.jsx)(w.A,{})})]}),(0,I.jsxs)(A.A,{component:"form",onSubmit:c,children:[(0,I.jsx)(j.A,{fullWidth:!0,margin:"normal",children:(0,I.jsx)(b.A,{label:"Username",id:"username",name:"username",value:i.username,onChange:n,required:!0})}),(0,I.jsxs)(j.A,{fullWidth:!0,margin:"normal",children:[(0,I.jsx)(v.A,{id:"house-label",children:"House"}),(0,I.jsx)(f.A,{labelId:"house-label",id:"houseId",name:"houseId",value:i.houseId,onChange:n,required:!0,children:s.map((e=>(0,I.jsx)(y.A,{value:e._id,children:e.name},e._id)))})]}),(0,I.jsxs)(j.A,{fullWidth:!0,margin:"normal",children:[(0,I.jsxs)(k.A,{variant:"contained",component:"label",children:["Upload Profile Picture",(0,I.jsx)("input",{type:"file",hidden:!0,id:"profilePicture",name:"profilePicture",accept:"image/*",onChange:d})]}),i.profilePicture&&(0,I.jsx)(A.A,{mt:2,sx:{textAlign:"center"},children:i.profilePicture instanceof File?(0,I.jsx)(C.A,{src:URL.createObjectURL(i.profilePicture),alt:"Duck Preview",variant:"retangular",className:"duck-image-preview",height:"200px"}):(0,I.jsx)(C.A,{src:`${p}/${i.profilePicture.replace(/\\/g,"/")}`,variant:"retangular",alt:"Duck Preview",className:"duck-image-preview",height:"200px"})})]}),(0,I.jsx)(k.A,{type:"submit",variant:"contained",color:"success",fullWidth:!0,sx:{mt:3},disabled:h,children:h?"Saving...":r?"Update User":"Add User"}),r&&(0,I.jsx)(k.A,{variant:"contained",color:"error",fullWidth:!0,sx:{mt:2},onClick:u,children:"Delete User"})]})]})})};var U=t(5721),D=t(4628),E=t(8734),_=t(8185),W=t(8266);const N=e=>{let{loading:a,items:t,type:r,onEdit:i,apiBaseUrl:s,placeholderImage:n="https://via.placeholder.com/40"}=e;return(0,I.jsx)(U.A,{sx:{mt:4},children:a?Array.from(new Array(5)).map(((e,a)=>(0,I.jsxs)(D.Ay,{className:`${r}-list-item`,children:[(0,I.jsx)(E.A,{primary:(0,I.jsx)(_.A,{variant:"text",width:"40%",height:30}),secondary:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(_.A,{variant:"text",width:"60%",height:20})})}),(0,I.jsx)(W.A,{children:(0,I.jsx)(_.A,{variant:"circular",width:40,height:40})})]},a))):t.map((e=>{var a,t;return(0,I.jsxs)(D.Ay,{className:"duck-list-item",sx:{cursor:"pointer"},onClick:()=>i(e),children:[(0,I.jsx)(E.A,{primary:(0,I.jsx)(l.A,{variant:"h5",children:"duck"===r?`Pato ${e.id}`:e.username||e.name}),secondary:"duck"===r?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["Casa: ",null===(a=e.house)||void 0===a?void 0:a.name]}),(0,I.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["Participante: ",null===(t=e.user)||void 0===t?void 0:t.username]}),(0,I.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["Tipo: ",e.type]}),(0,I.jsx)(l.A,{variant:"body2",color:e.found?"success.main":"error.main",children:e.found?"Encontrado":"Escondido"})]}):null}),"duck"===r||"user"===r?(0,I.jsx)(W.A,{children:(0,I.jsx)(C.A,{src:"duck"===r?e.photo?`${s}/${e.photo.replace(/\\/g,"/")}`:n:"user"===r?e.profilePicture?`${s}/${e.profilePicture.replace(/\\/g,"/")}`:n:null,alt:"duck"===r?`Duck ${e.id}`:e.username||e.name,variant:"circular",className:`${r}-image`,width:40,height:40})}):null]},e._id)}))})},H="https://cadeopato.redirectme.net:8084",T=async(e,a,t)=>{try{const t=(await i.A.get(`${H}/ducks`)).data;e(t);const r=t.sort(((e,a)=>e.id-a.id));return a(r),r}catch(r){return console.error("Error fetching ducks:",r),[]}finally{t(!1)}},F=async(e,a)=>{try{const a=(await i.A.get(`${H}/houses`)).data;return e(a),a}catch(t){return console.error("Error fetching houses:",t),[]}finally{a(!1)}},B=async(e,a)=>{try{const a=(await i.A.get(`${H}/users`)).data;return e(a),a}catch(t){return console.error("Error fetching users:",t),[]}finally{a(!1)}},R=()=>{const[e,a]=(0,r.useState)([]),[t,g]=(0,r.useState)([]),[A,j]=(0,r.useState)([]),[b,v]=(0,r.useState)([]),[f,y]=(0,r.useState)({id:"",type:"",houseId:"",photo:"",userId:""}),[k,w]=(0,r.useState)({name:"",address:""}),[C,U]=(0,r.useState)({username:"",houseId:"",profilePicture:""}),[D,E]=(0,r.useState)(0),[_,W]=(0,r.useState)(""),[R,q]=(0,r.useState)(""),[Y,L]=(0,r.useState)(!1),[O,M]=(0,r.useState)(!1),[X,G]=(0,r.useState)(!1),[Z,z]=(0,r.useState)(!1),[J,K]=(0,r.useState)(!1),[Q,V]=(0,r.useState)(!1),[ee,ae]=(0,r.useState)(!0),[te,re]=(0,r.useState)(!1),[ie,se]=(0,r.useState)(!1),[ne,oe]=(0,r.useState)(!1),[le,de]=(0,r.useState)([]),ce=(0,m.Zp)();(0,r.useEffect)((()=>{sessionStorage.getItem("isAdminAuthenticated")||ce("/")}),[ce]),(0,r.useEffect)((()=>{(async()=>{F(g,ae),B(j,ae);const e=await T(a,v,ae);de(e)})()}),[]);const ue=()=>{y({userId:_||"",houseId:R||"",id:"",type:"normal",found:!1}),L(!1),z(!0)},he=()=>{w({name:"",address:""}),M(!1),K(!0)},pe=()=>{U({username:"",houseId:"",profilePicture:""}),G(!1),V(!0)};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(s.A,{className:"Appbar",position:"sticky",color:"default",children:[(0,I.jsxs)(n.A,{children:[(0,I.jsx)(o.A,{edge:"start",color:"inherit","aria-label":"back",onClick:()=>ce(-1),children:(0,I.jsx)(p.A,{})}),(0,I.jsx)(l.A,{component:"div",sx:{flexGrow:1,alignItems:"center",textAlign:"center"},children:(0,I.jsx)("h2",{style:{margin:0},children:"Admin"})})]}),(0,I.jsxs)(d.A,{value:D,onChange:async(e,t)=>{switch(E(t),t){case 0:const e=await T(a,v,ae);de(e);break;case 1:const t=await B(j,ae);de(t);break;case 2:const r=await F(g,ae);de(r)}},"aria-label":"Admin Tabs",centered:!0,indicatorColor:"primary",sx:{"& .MuiTab-root":{color:"var(--text-color)",fontFamily:"var(--font-family)","&.Mui-selected":{color:"var(--primary-color)",fontWeight:"bold"}},"& .MuiTabs-indicator":{backgroundColor:"var(--primary-color)",height:"4px"}},children:[(0,I.jsx)(c.A,{label:"Patos"}),(0,I.jsx)(c.A,{label:"Participantes"}),(0,I.jsx)(c.A,{label:"Casas"})]})]}),(0,I.jsx)(u.A,{color:"primary","aria-label":"add",onClick:e=>{0===D?ue():1===D?pe():he()},sx:{position:"fixed",bottom:16,right:16,backgroundColor:"var(--accent-color)","&:hover":{backgroundColor:"var(--primary-color-hover)"},color:"white"},children:(0,I.jsx)(x.OiG,{})}),(0,I.jsxs)(h.A,{children:[(0,I.jsx)(S,{open:Z,handleClose:()=>z(!1),isEditing:Y,currentDuck:f,houses:t,users:A,handleInputChange:e=>{const{name:a,value:t}=e.target;y({...f,[a]:t})},handlePhotoChange:e=>{const a=e.target.files[0];a&&y({...f,photo:a})},handleSubmit:async e=>{e.preventDefault(),re(!0);try{const e=new FormData;e.append("id",f.id),e.append("type",f.type),e.append("houseId",f.houseId),e.append("userId",f.userId),f.photo instanceof File&&e.append("photo",f.photo),Y?await i.A.put(`${H}/ducks/${f._id}`,e,{headers:{"Content-Type":"multipart/form-data"}}):(e.append("found",!1),await i.A.post(`${H}/ducks`,e,{headers:{"Content-Type":"multipart/form-data"}}));const t=await T(a,v,ae);0===D&&de(t),z(!1)}catch(t){console.error("Error saving duck:",t)}finally{re(!1)}},handleDelete:async()=>{try{await i.A.delete(`${H}/ducks/${f._id}`);const e=await T(a,v,ae);0===D&&de(e),z(!1)}catch(e){console.error("Error deleting duck:",e)}},submitting:te,apiBaseUrl:H}),(0,I.jsx)(P,{open:J,handleClose:()=>K(!1),isEditing:O,currentHouse:k,handleInputChange:e=>{const{name:a,value:t}=e.target;w({...k,[a]:t})},handleSubmit:async e=>{e.preventDefault(),se(!0);try{O?await i.A.put(`${H}/houses/${k._id}`,k):await i.A.post(`${H}/houses`,k);const e=await F(g,ae);2===D&&de(e),K(!1)}catch(a){console.error("Error saving house:",a)}finally{se(!1)}},handleDelete:async()=>{try{await i.A.delete(`${H}/houses/${k._id}`);const e=await F(g,ae);2===D&&de(e),K(!1)}catch(e){console.error("Error deleting house:",e)}},submitting:ie}),(0,I.jsx)($,{open:Q,onClose:()=>V(!1),isEditing:X,currentUser:C,houses:t,onInputChange:e=>{const{name:a,value:t}=e.target;U({...C,[a]:t})},handlePhotoChange:e=>{const a=e.target.files[0];a&&U({...C,profilePicture:a})},onSubmit:async e=>{e.preventDefault(),oe(!0);try{const e=new FormData;e.append("username",C.username),e.append("houseId",C.houseId),C.profilePicture instanceof File&&e.append("profilePicture",C.profilePicture),X?await i.A.put(`${H}/users/${C._id}`,e,{headers:{"Content-Type":"multipart/form-data"}}):await i.A.post(`${H}/users`,e,{headers:{"Content-Type":"multipart/form-data"}});const a=await B(j,ae);1===D&&de(a),V(!1)}catch(a){console.error("Error saving user:",a)}finally{oe(!1)}},onDelete:async()=>{try{await i.A.delete(`${H}/users/${C._id}`);const e=await B(j,ae);1===D&&de(e),V(!1)}catch(e){console.error("Error deleting user:",e)}},submitting:ne,apiBaseUrl:H}),(0,I.jsx)(N,{loading:ee,items:le,type:0===D?"duck":1===D?"user":"house",onEdit:0===D?e=>{y({_id:e._id,userId:e.user?e.user._id:"",houseId:e.house?e.house._id:"",id:e.id,type:e.type,photo:e.photo,found:e.found}),L(!0),z(!0)}:1===D?e=>{U({_id:e._id,username:e.username,houseId:e.house?e.house._id:"",profilePicture:e.profilePicture}),G(!0),V(!0)}:e=>{w(e),M(!0),K(!0)},apiBaseUrl:H})]})]})}}}]);
//# sourceMappingURL=179.e8033262.chunk.js.map
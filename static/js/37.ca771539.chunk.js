"use strict";(self.webpackChunkpatolimpiadas_casaes=self.webpackChunkpatolimpiadas_casaes||[]).push([[37],{9037:(e,s,t)=>{t.r(s),t.d(s,{default:()=>_});var a=t(5043),r=t(6213),n=t(8729),o=t(5475),c=t(2314),i=t(5263),l=t(7392),d=t(5865),h=t(6446),u=t(611),x=t(547),g=t(5721),j=t(4628),m=t(8734),p=t(8185),A=t(8266),f=t(9901),y=t(1637),k=t(7332),v=t(4125),b=t(9506),w=t(79),S=t(3216),N=t(579);const _=()=>{const{authState:e}=(0,a.useContext)(n.c),[s,t]=(0,a.useState)([]),[_,C]=(0,a.useState)(!0),[$,E]=(0,a.useState)(0),[F,P]=(0,a.useState)(0),[U,z]=(0,a.useState)(0),[B,I]=(0,a.useState)(null),[D,G]=(0,a.useState)(!1),T=(0,S.Zp)();e.user||(window.location.href="/");const X="https://cadeopato.redirectme.net:8084";(0,a.useEffect)((()=>{(async()=>{C(!0),I(null);try{const s=(await r.A.get(`${X}/ducks/search?userId=${e.user.selectedUser._id}`)).data;t(s);const a=s.filter((e=>e.found)).length,n=a/s.length*100;E(n),z(a),P(s.length)}catch(B){console.error("Error fetching ducks:",B),I("N\xe3o foi poss\xedvel carregar os dados. Por favor, contate o administrador.")}finally{C(!1)}})()}),[X,e.user.selectedUser._id]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(c.A,{className:"Appbar",position:"sticky",color:"default",children:[(0,N.jsxs)(i.A,{children:[(0,N.jsx)(l.A,{edge:"start",color:"inherit","aria-label":"back",onClick:()=>T(-1),children:(0,N.jsx)(k.A,{})}),(0,N.jsx)(d.A,{component:"div",sx:{flexGrow:1,alignItems:"center",textAlign:"center"},children:(0,N.jsxs)("h2",{style:{margin:0},children:[" ",e.user.selectedUser.username," Dashboard"]})}),(0,N.jsx)(l.A,{edge:"end",color:"inherit",component:o.N_,to:"/ranking","aria-label":"ranking",children:(0,N.jsx)(v.A,{})})]}),(0,N.jsxs)(h.A,{sx:{paddingX:2,paddingBottom:2},children:[(0,N.jsx)(u.A,{variant:"determinate",value:$}),(0,N.jsxs)(d.A,{variant:"body2",color:"textSecondary",align:"center",children:[U," de ",F," patos encontrados"]})]})]}),(0,N.jsxs)("div",{className:"container py-4",children:[B&&(0,N.jsx)(x.A,{severity:"error",sx:{marginBottom:2},children:B}),(0,N.jsx)(g.A,{children:_?Array.from(new Array(5)).map(((e,s)=>(0,N.jsxs)(j.Ay,{className:"duck-list-item",children:[(0,N.jsx)(m.A,{primary:(0,N.jsx)(p.A,{variant:"text",width:"40%",height:30}),secondary:(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(p.A,{variant:"text",width:"60%",height:20})})}),(0,N.jsx)(A.A,{children:(0,N.jsx)(p.A,{variant:"rectangular",width:40,height:40})})]},s))):s.map((e=>(0,N.jsxs)(j.Ay,{className:"duck-list-item",children:[(0,N.jsx)(m.A,{primary:(0,N.jsxs)("h5",{children:["Pato ",e.id]}),secondary:(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("span",{children:["Tipo: ",e.type]})})}),(0,N.jsx)(A.A,{children:(0,N.jsx)(f.A,{value:"check",selected:e.found,onChange:()=>(async(e,a)=>{G(!0);try{await r.A.put(`${X}/ducks/${e}`,{found:a});const n=s.map((s=>s._id===e?{...s,found:a}:s));t(n);const o=n.filter((e=>e.found)).length,c=o/n.length*100;E(c),z(o),P(n.length)}catch(B){console.error(`Error marking duck as ${a?"found":"unfound"}:`,B),I("N\xe3o foi poss\xedvel atualizar o status do pato. Por favor, tente novamente.")}finally{G(!1)}})(e._id,!e.found),className:e.found?"toggle-button-selected":"toggle-button-unselected",disabled:D,children:D?(0,N.jsx)(y.A,{size:24,sx:{color:"var(--accent-color)"}}):e.found?(0,N.jsx)(b.A,{style:{color:"#28a745"}}):(0,N.jsx)(w.A,{style:{color:"#dc3545"}})})})]},e._id)))})]})]})}}}]);
//# sourceMappingURL=37.ca771539.chunk.js.map
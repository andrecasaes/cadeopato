"use strict";(self.webpackChunkpatolimpiadas_casaes=self.webpackChunkpatolimpiadas_casaes||[]).push([[348],{3719:(e,a,r)=>{r.d(a,{A:()=>i});var t=r(5043),n=r(8185),o=r(579);const i=e=>{let{src:a,alt:r,variant:i,className:s,width:l,height:d}=e;const[c,u]=(0,t.useState)(!0);return(0,o.jsxs)("div",{className:"image-container",style:{position:"relative",width:l,height:d},children:[c&&(0,o.jsx)(n.A,{variant:i,width:l,height:d,style:{position:"absolute",top:0,left:0}}),(0,o.jsx)("img",{src:a,alt:r,className:s,onLoad:()=>u(!1),style:{display:c?"none":"block",borderRadius:"circular"===i?"50%":"",width:l,height:d}})]})}},5348:(e,a,r)=>{r.r(a),r.d(a,{default:()=>K});var t=r(5043),n=r(6213),o=r(2314),i=r(5263),s=r(7392),l=r(5865),d=r(4669),c=r(4056),u=r(4010),h=r(7872),p=r(4109),m=r(3193),x=r(9190),g=r(1659),A=r(6990),v=r(1906),j=r(7332),f=r(4190),b=r(3216),y=r(3204),C=r(9573),k=r(6446),w=r(5795),S=r(4802),D=r(3719),I=r(1121),P=r(579);const $=e=>{let{open:a,handleClose:r,isEditing:t,currentDuck:n,houses:o,users:i,handleInputChange:d,handlePhotoChange:c,handleSubmit:u,handleDelete:h,submitting:p,apiBaseUrl:j}=e;const f=n.foundDate?(0,I.GP)(new Date(n.foundDate),"yyyy-MM-dd'T'HH:mm"):"";return(0,P.jsx)(C.A,{open:a,onClose:r,"aria-labelledby":"modal-title","aria-describedby":"modal-description",sx:{display:"flex",alignItems:"center",justifyContent:"center",marginX:6,overflowY:"auto"},children:(0,P.jsxs)(k.A,{sx:{bgcolor:"background.paper",p:4,borderRadius:1,boxShadow:24,maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",position:"relative"},children:[(0,P.jsxs)(l.A,{id:"modal-title",variant:"h6",component:"h2",gutterBottom:!0,children:[t?"Edit Duck":"Add New Duck",(0,P.jsx)(s.A,{"aria-label":"close",onClick:r,sx:{position:"absolute",right:8,top:8},children:(0,P.jsx)(S.A,{})})]}),(0,P.jsxs)(k.A,{component:"form",onSubmit:u,children:[(0,P.jsx)(m.A,{fullWidth:!0,margin:"normal",children:(0,P.jsx)(w.A,{label:"Numero",type:"number",id:"duckNumber",name:"id",value:n.id,onChange:d,disabled:t,required:!0})}),(0,P.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,P.jsx)(x.A,{id:"duckType-label",children:"Tipo"}),(0,P.jsxs)(g.A,{labelId:"duckType-label",id:"duckType",name:"type",value:n.type,onChange:d,required:!0,children:[(0,P.jsx)(A.A,{value:"normal",children:"Normal"}),(0,P.jsx)(A.A,{value:"oclinhos",children:"Oclinhos"})]})]}),(0,P.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,P.jsx)(x.A,{id:"duckHouse-label",children:"Casa"}),(0,P.jsx)(g.A,{labelId:"duckHouse-label",id:"duckHouse",name:"houseId",value:n.houseId,onChange:d,required:!0,children:o.map((e=>(0,P.jsx)(A.A,{value:e._id,children:e.name},e._id)))})]}),(0,P.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,P.jsx)(x.A,{id:"duckUser-label",children:"User"}),(0,P.jsx)(g.A,{labelId:"duckUser-label",id:"duckUser",name:"userId",value:n.userId,onChange:d,required:!0,children:i.map((e=>(0,P.jsx)(A.A,{value:e._id,children:e.username},e._id)))})]}),n.found&&(0,P.jsx)(m.A,{fullWidth:!0,margin:"normal",children:(0,P.jsx)(w.A,{label:"Data Encontrado",type:"datetime-local",id:"foundDate",name:"foundDate",value:f,onChange:d,InputLabelProps:{shrink:!0}})}),(0,P.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,P.jsxs)(v.A,{variant:"contained",component:"label",children:["Upload Photo",(0,P.jsx)("input",{type:"file",hidden:!0,id:"duckPhoto",name:"photo",accept:"image/*",onChange:c})]}),n.photo&&(0,P.jsx)(k.A,{mt:2,sx:{textAlign:"center"},children:n.photo instanceof File?(0,P.jsx)(D.A,{src:URL.createObjectURL(n.photo),alt:"Duck Preview",variant:"retangular",className:"duck-image-preview",height:"200px"}):(0,P.jsx)(D.A,{src:`${j}/${n.photo.replace(/\\/g,"/")}`,variant:"retangular",alt:"Duck Preview",className:"duck-image-preview",height:"200px"})})]}),(0,P.jsx)(v.A,{type:"submit",variant:"contained",color:"success",fullWidth:!0,sx:{mt:3},disabled:p,children:p?"Saving...":t?"Update Duck":"Add Duck"}),t&&(0,P.jsx)(v.A,{variant:"contained",color:"error",fullWidth:!0,sx:{mt:2},onClick:h,children:"Delete Duck"})]})]})})},E=e=>{let{open:a,handleClose:r,isEditing:t,currentHouse:n,handleInputChange:o,handleSubmit:i,handleDelete:d,submitting:c}=e;return(0,P.jsx)(C.A,{open:a,onClose:r,"aria-labelledby":"modal-title","aria-describedby":"modal-description",sx:{display:"flex",alignItems:"center",justifyContent:"center",marginX:6,overflowY:"auto"},children:(0,P.jsxs)(k.A,{sx:{bgcolor:"background.paper",p:4,borderRadius:1,boxShadow:24,maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",position:"relative"},children:[(0,P.jsxs)(l.A,{id:"modal-title",variant:"h6",component:"h2",gutterBottom:!0,children:[t?"Edit House":"Add New House",(0,P.jsx)(s.A,{"aria-label":"close",onClick:r,sx:{position:"absolute",right:8,top:8},children:(0,P.jsx)(S.A,{})})]}),(0,P.jsxs)(k.A,{component:"form",onSubmit:i,children:[(0,P.jsx)(m.A,{fullWidth:!0,margin:"normal",children:(0,P.jsx)(w.A,{label:"Name",type:"text",id:"houseName",name:"name",value:n.name,onChange:o,required:!0})}),(0,P.jsx)(m.A,{fullWidth:!0,margin:"normal",children:(0,P.jsx)(w.A,{label:"Address",type:"text",id:"houseAddress",name:"address",value:n.address,onChange:o})}),(0,P.jsx)(v.A,{type:"submit",variant:"contained",color:"success",fullWidth:!0,sx:{mt:3},disabled:c,children:c?"Saving...":t?"Update House":"Add House"}),t&&(0,P.jsx)(v.A,{variant:"contained",color:"error",fullWidth:!0,sx:{mt:2},onClick:d,children:"Delete House"})]})]})})},U=e=>{let{open:a,onClose:r,isEditing:t,currentUser:n,houses:o,onInputChange:i,handlePhotoChange:d,onSubmit:c,onDelete:u,submitting:h,apiBaseUrl:p}=e;return(0,P.jsx)(C.A,{open:a,onClose:r,"aria-labelledby":"modal-title","aria-describedby":"modal-description",sx:{display:"flex",alignItems:"center",justifyContent:"center",marginX:6,overflowY:"auto"},children:(0,P.jsxs)(k.A,{sx:{bgcolor:"background.paper",p:4,borderRadius:1,boxShadow:24,maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",position:"relative"},children:[(0,P.jsxs)(l.A,{id:"modal-title",variant:"h6",component:"h2",gutterBottom:!0,children:[t?"Edit User":"Add New User",(0,P.jsx)(s.A,{"aria-label":"close",onClick:r,sx:{position:"absolute",right:8,top:8},children:(0,P.jsx)(S.A,{})})]}),(0,P.jsxs)(k.A,{component:"form",onSubmit:c,children:[(0,P.jsx)(m.A,{fullWidth:!0,margin:"normal",children:(0,P.jsx)(w.A,{label:"Username",id:"username",name:"username",value:n.username,onChange:i,required:!0})}),(0,P.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,P.jsx)(x.A,{id:"house-label",children:"House"}),(0,P.jsx)(g.A,{labelId:"house-label",id:"houseId",name:"houseId",value:n.houseId,onChange:i,required:!0,children:o.map((e=>(0,P.jsx)(A.A,{value:e._id,children:e.name},e._id)))})]}),(0,P.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,P.jsxs)(v.A,{variant:"contained",component:"label",children:["Upload Profile Picture",(0,P.jsx)("input",{type:"file",hidden:!0,id:"profilePicture",name:"profilePicture",accept:"image/*",onChange:d})]}),n.profilePicture&&(0,P.jsx)(k.A,{mt:2,sx:{textAlign:"center"},children:n.profilePicture instanceof File?(0,P.jsx)(D.A,{src:URL.createObjectURL(n.profilePicture),alt:"Duck Preview",variant:"retangular",className:"duck-image-preview",height:"200px"}):(0,P.jsx)(D.A,{src:`${p}/${n.profilePicture.replace(/\\/g,"/")}`,variant:"retangular",alt:"Duck Preview",className:"duck-image-preview",height:"200px"})})]}),(0,P.jsx)(v.A,{type:"submit",variant:"contained",color:"success",fullWidth:!0,sx:{mt:3},disabled:h,children:h?"Saving...":t?"Update User":"Add User"}),t&&(0,P.jsx)(v.A,{variant:"contained",color:"error",fullWidth:!0,sx:{mt:2},onClick:u,children:"Delete User"})]})]})})};var _=r(5721),W=r(4628),N=r(8734),F=r(8185),H=r(8266);const T=e=>{let{loading:a,items:r,type:t,onEdit:n,apiBaseUrl:o,placeholderImage:i="https://via.placeholder.com/40"}=e;return(0,P.jsx)(_.A,{sx:{mt:4},children:a?Array.from(new Array(5)).map(((e,a)=>(0,P.jsxs)(W.Ay,{className:"admin-list-item",children:[(0,P.jsx)(N.A,{primary:(0,P.jsx)(F.A,{variant:"text",width:"40%",height:30}),secondary:(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(F.A,{variant:"text",width:"60%",height:20})})}),(0,P.jsx)(H.A,{children:(0,P.jsx)(F.A,{variant:"circular",width:40,height:40})})]},a))):r.map((e=>{var a,r;return(0,P.jsxs)(W.Ay,{className:"admin-list-item",sx:{cursor:"pointer"},onClick:()=>n(e),children:[(0,P.jsx)(N.A,{primary:(0,P.jsx)(l.A,{variant:"h5",children:"duck"===t?`Pato ${e.id}`:e.username||e.name}),secondary:"duck"===t?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["Casa: ",null===(a=e.house)||void 0===a?void 0:a.name]}),(0,P.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["Participante: ",null===(r=e.user)||void 0===r?void 0:r.username]}),(0,P.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["Tipo: ",e.type]}),(0,P.jsx)(l.A,{variant:"body2",color:e.found?"success.main":"error.main",children:e.found&&e.foundDate?`Encontrado em ${(0,I.GP)(new Date(e.foundDate),"dd/MM/yyyy HH:mm")}`:e.found?"Encontrado, data indispon\xedvel":"Escondido"})]}):null}),"duck"===t||"user"===t?(0,P.jsx)(H.A,{children:(0,P.jsx)(D.A,{src:"duck"===t?e.photo?`${o}/${e.photo.replace(/\\/g,"/")}`:i:"user"===t?e.profilePicture?`${o}/${e.profilePicture.replace(/\\/g,"/")}`:i:null,alt:"duck"===t?`Duck ${e.id}`:e.username||e.name,variant:"circular",className:`${t}-image`,width:40,height:40})}):null]},e._id)}))})};var R=r(7029),B=r.n(R),q=r(547),L=r(1637),M=r(3995),Y=r(2429),z=r(8911),G=r(7141);const O=e=>{let{open:a,handleClose:r,onUploadSuccess:o}=e;const[i,l]=(0,t.useState)(null),[d,c]=(0,t.useState)(""),u=(0,t.useRef)(null),[h,p]=(0,t.useState)(!1),[m,x]=(0,t.useState)([]),[g,A]=(0,t.useState)(""),[v,j]=(0,t.useState)(""),[f,b]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)try{const e=await navigator.mediaDevices.getUserMedia({video:!0}),a=(await navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind)),r=a.filter((e=>e.label.toLowerCase().includes("back")));r.length>0?(x(r),A(r[0].deviceId)):a.length>0?A(a[0].deviceId):j("Nenhuma c\xe2mera dispon\xedvel!"),e.getTracks().forEach((e=>e.stop()))}catch(e){j("Permiss\xe3o da c\xe2mera negada ou erro ao acessar a c\xe2mera."),console.error("Camera permission error:",e)}else j("Navegador n\xe3o suporta o acesso \xe0 c\xe2mera.")})()}),[]);return(0,P.jsx)(C.A,{open:a,onClose:r,sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,P.jsxs)(k.A,{sx:{bgcolor:"background.paper",p:4,borderRadius:1,boxShadow:24,width:"400px",textAlign:"center"},children:[f&&(0,P.jsx)(q.A,{severity:"success",sx:{mt:2,mb:2},children:f}),i?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("img",{src:i,alt:"Captured Duck",style:{width:"100%",borderRadius:"8px"}}),(0,P.jsx)(w.A,{label:"Numero do Pato",type:"number",fullWidth:!0,value:d,onChange:e=>{c(e.target.value),j(""),b("")},sx:{mt:2},required:!0}),v&&(0,P.jsx)(q.A,{severity:"error",sx:{mt:2,mb:2},children:v}),(0,P.jsxs)(k.A,{sx:{display:"flex",justifyContent:"center",mt:2},children:[(0,P.jsx)(s.A,{onClick:()=>l(null),disabled:h,sx:{backgroundColor:"var(--primary-color)","&:hover":{backgroundColor:"var(--primary-color-hover)"},color:"white",borderRadius:"50%",padding:"16px"},children:(0,P.jsx)(z.A,{sx:{fontSize:40}})}),(0,P.jsx)(s.A,{onClick:async()=>{if(d&&i){p(!0),j(""),b("");try{const e=new FormData,a=await fetch(i).then((e=>e.blob()));e.append("photo",new File([a],"duck-photo.jpg",{type:"image/jpeg"})),await n.A.put(`https://api.cadeopato.app.br/ducks/image/${d}`,e,{headers:{"Content-Type":"multipart/form-data"}}),b(`Pato ${d} mudou de visual!`),l(null),c("")}catch(e){e.response&&404===e.response.status?j(`Pato ${d} n\xe3o encontrado!`):e.response?j("Erro ao carregar a foto. Tente novamente."):j("Erro de rede. Verifique sua conex\xe3o.")}finally{p(!1)}}else j("N\xfamero do pato ou foto ausente.")},disabled:h,sx:{backgroundColor:h?"gray":"var(--success-color)","&:hover":{backgroundColor:h?"gray":"var(--primary-color-hover)"},color:"white",borderRadius:"50%",padding:"16px",marginLeft:"16px"},children:h?(0,P.jsx)(L.A,{size:24}):(0,P.jsx)(G.A,{sx:{fontSize:40}})})]})]}):(0,P.jsxs)(P.Fragment,{children:[g&&(0,P.jsx)(B(),{audio:!1,ref:u,screenshotFormat:"image/jpeg",width:"100%",videoConstraints:{deviceId:g}}),(0,P.jsxs)(k.A,{sx:{display:"flex",justifyContent:"center",mt:2},children:[m.length>1&&(0,P.jsx)(s.A,{onClick:()=>{if(m.length>1){const e=(m.findIndex((e=>e.deviceId===g))+1)%m.length;A(m[e].deviceId)}},sx:{backgroundColor:"var(--secondary-color)","&:hover":{backgroundColor:"var(--primary-color-hover)"},color:"white",borderRadius:"50%",padding:"16px"},children:(0,P.jsx)(M.A,{sx:{fontSize:40}})}),(0,P.jsx)(s.A,{onClick:()=>{const e=u.current.getScreenshot();e?(l(e),b("")):j("Erro ao capturar a foto. Tente novamente.")},sx:{backgroundColor:"var(--accent-color)","&:hover":{backgroundColor:"var(--primary-color-hover)"},color:"white",borderRadius:"50%",marginLeft:"16px",padding:"16px"},children:(0,P.jsx)(Y.A,{sx:{fontSize:40}})})]})]})]})})},X="https://api.cadeopato.app.br",V=async(e,a)=>{try{const a=(await n.A.get(`${X}/ducks`)).data;return e(a),a}catch(r){return console.error("Error fetching ducks:",r),[]}finally{a(!1)}},Z=async(e,a)=>{try{const a=(await n.A.get(`${X}/houses`)).data;return e(a),a}catch(r){return console.error("Error fetching houses:",r),[]}finally{a(!1)}},J=async(e,a)=>{try{const a=(await n.A.get(`${X}/users`)).data;return e(a),a}catch(r){return console.error("Error fetching users:",r),[]}finally{a(!1)}},K=()=>{const[e,a]=(0,t.useState)([]),[r,C]=(0,t.useState)([]),[k,w]=(0,t.useState)([]),[S,D]=(0,t.useState)({id:"",type:"",houseId:"",photo:"",userId:"",foundDate:""}),[I,_]=(0,t.useState)({name:"",address:""}),[W,N]=(0,t.useState)({username:"",houseId:"",profilePicture:""}),[F,H]=(0,t.useState)(0),[R,B]=(0,t.useState)(!1),[q,L]=(0,t.useState)(!1),[M,Y]=(0,t.useState)(!1),[z,G]=(0,t.useState)(!1),[K,Q]=(0,t.useState)(!1),[ee,ae]=(0,t.useState)(!1),[re,te]=(0,t.useState)(!0),[ne,oe]=(0,t.useState)(!1),[ie,se]=(0,t.useState)(!1),[le,de]=(0,t.useState)(!1),[ce,ue]=(0,t.useState)([]),[he,pe]=(0,t.useState)(!1),[me,xe]=(0,t.useState)(""),[ge,Ae]=(0,t.useState)(""),[ve,je]=(0,t.useState)("all"),[fe,be]=(0,t.useState)(!1),ye=(0,b.Zp)();(0,t.useEffect)((()=>{sessionStorage.getItem("isAdminAuthenticated")||ye("/")}),[ye]),(0,t.useEffect)((()=>{(async()=>{Z(C,te),J(w,te);await V(a,te)})()}),[]),(0,t.useEffect)((()=>{Ce()}),[me,ge,ve,e]);const Ce=()=>{let a=e;me&&(a=a.filter((e=>e.user&&e.user._id===me))),ge&&(a=a.filter((e=>e.house&&e.house._id===ge))),"found"===ve?a=a.filter((e=>!0===e.found)):"not_found"===ve&&(a=a.filter((e=>!1===e.found))),ue(a)},ke=()=>{D({userId:"",houseId:"",id:"",type:"normal",found:!1}),B(!1),G(!0)},we=()=>{_({name:"",address:""}),L(!1),Q(!0)},Se=()=>{N({username:"",houseId:"",profilePicture:""}),Y(!1),ae(!0)},De=()=>{be(!fe)};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(o.A,{className:"Appbar",position:"sticky",color:"default",children:[(0,P.jsxs)(i.A,{children:[(0,P.jsx)(s.A,{edge:"start",color:"inherit","aria-label":"back",onClick:()=>ye(-1),children:(0,P.jsx)(j.A,{})}),(0,P.jsx)(l.A,{component:"div",sx:{flexGrow:1,alignItems:"center",textAlign:"center"},children:(0,P.jsx)("h2",{style:{margin:0},children:"Admin"})}),0===F&&(0,P.jsx)(s.A,{color:"inherit","aria-label":"filter",onClick:De,children:(0,P.jsx)(f.A,{})})]}),(0,P.jsxs)(d.A,{value:F,onChange:async(e,r)=>{switch(H(r),r){case 0:await V(a,te);break;case 1:const e=await J(w,te);ue(e);break;case 2:const r=await Z(C,te);ue(r)}},"aria-label":"Admin Tabs",centered:!0,indicatorColor:"primary",sx:{"& .MuiTab-root":{color:"var(--text-color)",fontFamily:"var(--font-family)","&.Mui-selected":{color:"var(--primary-color)",fontWeight:"bold"}},"& .MuiTabs-indicator":{backgroundColor:"var(--primary-color)",height:"4px"}},children:[(0,P.jsx)(c.A,{label:"Patos"}),(0,P.jsx)(c.A,{label:"Participantes"}),(0,P.jsx)(c.A,{label:"Casas"})]})]}),(0,P.jsx)(u.A,{color:"primary","aria-label":"add",onClick:e=>{0===F?ke():1===F?Se():we()},sx:{position:"fixed",bottom:16,right:16,backgroundColor:"var(--accent-color)","&:hover":{backgroundColor:"var(--primary-color-hover)"},color:"white"},children:(0,P.jsx)(y.OiG,{})}),(0,P.jsx)(u.A,{color:"primary","aria-label":"camera",onClick:()=>{pe(!0)},sx:{position:"fixed",bottom:100,right:16,backgroundColor:"var(--accent-color)","&:hover":{backgroundColor:"var(--primary-color-hover)"},color:"white"},children:(0,P.jsx)(y.p5B,{})}),(0,P.jsx)($,{open:z,handleClose:()=>G(!1),isEditing:R,currentDuck:S,houses:r,users:k,handleInputChange:e=>{const{name:a,value:r}=e.target;D({...S,[a]:r})},handlePhotoChange:e=>{const a=e.target.files[0];a&&D({...S,photo:a})},handleSubmit:async e=>{e.preventDefault(),oe(!0);try{const e=new FormData;e.append("id",S.id),e.append("type",S.type),e.append("houseId",S.houseId),e.append("userId",S.userId),e.append("foundDate",S.foundDate),S.photo instanceof File&&e.append("photo",S.photo),R?await n.A.put(`${X}/ducks/${S._id}`,e,{headers:{"Content-Type":"multipart/form-data"}}):(e.append("found",!1),await n.A.post(`${X}/ducks`,e,{headers:{"Content-Type":"multipart/form-data"}})),await V(a,te),G(!1)}catch(r){console.error("Error saving duck:",r)}finally{oe(!1)}},handleDelete:async()=>{try{await n.A.delete(`${X}/ducks/${S._id}`),await V(a,te),G(!1)}catch(e){console.error("Error deleting duck:",e)}},submitting:ne,apiBaseUrl:X}),(0,P.jsx)(E,{open:K,handleClose:()=>Q(!1),isEditing:q,currentHouse:I,handleInputChange:e=>{const{name:a,value:r}=e.target;_({...I,[a]:r})},handleSubmit:async e=>{e.preventDefault(),se(!0);try{q?await n.A.put(`${X}/houses/${I._id}`,I):await n.A.post(`${X}/houses`,I);const e=await Z(C,te);2===F&&ue(e),Q(!1)}catch(a){console.error("Error saving house:",a)}finally{se(!1)}},handleDelete:async()=>{try{await n.A.delete(`${X}/houses/${I._id}`);const e=await Z(C,te);2===F&&ue(e),Q(!1)}catch(e){console.error("Error deleting house:",e)}},submitting:ie}),(0,P.jsx)(U,{open:ee,onClose:()=>ae(!1),isEditing:M,currentUser:W,houses:r,onInputChange:e=>{const{name:a,value:r}=e.target;N({...W,[a]:r})},handlePhotoChange:e=>{const a=e.target.files[0];a&&N({...W,profilePicture:a})},onSubmit:async e=>{e.preventDefault(),de(!0);try{const e=new FormData;e.append("username",W.username),e.append("houseId",W.houseId),W.profilePicture instanceof File&&e.append("profilePicture",W.profilePicture),M?await n.A.put(`${X}/users/${W._id}`,e,{headers:{"Content-Type":"multipart/form-data"}}):await n.A.post(`${X}/users`,e,{headers:{"Content-Type":"multipart/form-data"}});const a=await J(w,te);1===F&&ue(a),ae(!1)}catch(a){console.error("Error saving user:",a)}finally{de(!1)}},onDelete:async()=>{try{await n.A.delete(`${X}/users/${W._id}`);const e=await J(w,te);1===F&&ue(e),ae(!1)}catch(e){console.error("Error deleting user:",e)}},submitting:le,apiBaseUrl:X}),(0,P.jsx)(O,{open:he,handleClose:()=>{pe(!1)},onUploadSuccess:()=>{pe(!1)}}),(0,P.jsxs)(h.A,{children:[(0,P.jsx)(p.Ay,{anchor:"right",open:fe,onClose:De,variant:"temporary",children:(0,P.jsxs)("div",{style:{width:250,padding:16},children:[(0,P.jsx)(l.A,{variant:"h6",children:"Filters"}),(0,P.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,P.jsx)(x.A,{children:"User"}),(0,P.jsxs)(g.A,{value:me,onChange:e=>xe(e.target.value),children:[(0,P.jsx)(A.A,{value:"",children:(0,P.jsx)("em",{children:"All"})}),k.map((e=>(0,P.jsx)(A.A,{value:e._id,children:e.username},e._id)))]})]}),(0,P.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,P.jsx)(x.A,{children:"House"}),(0,P.jsxs)(g.A,{value:ge,onChange:e=>Ae(e.target.value),children:[(0,P.jsx)(A.A,{value:"",children:(0,P.jsx)("em",{children:"All"})}),r.map((e=>(0,P.jsx)(A.A,{value:e._id,children:e.name},e._id)))]})]}),(0,P.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,P.jsx)(x.A,{children:"Status"}),(0,P.jsxs)(g.A,{value:ve,onChange:e=>je(e.target.value),children:[(0,P.jsx)(A.A,{value:"all",children:"All"}),(0,P.jsx)(A.A,{value:"found",children:"Found"}),(0,P.jsx)(A.A,{value:"not_found",children:"Not Found"})]})]}),(0,P.jsx)(v.A,{variant:"outlined",onClick:()=>{xe(""),Ae(""),je("all")},fullWidth:!0,children:"Clear Filters"})]})}),(0,P.jsx)(T,{loading:re,items:ce,type:0===F?"duck":1===F?"user":"house",onEdit:0===F?e=>{D({_id:e._id,userId:e.user?e.user._id:"",houseId:e.house?e.house._id:"",id:e.id,type:e.type,photo:e.photo,found:e.found,foundDate:e.foundDate}),B(!0),G(!0)}:1===F?e=>{N({_id:e._id,username:e.username,houseId:e.house?e.house._id:"",profilePicture:e.profilePicture}),Y(!0),ae(!0)}:e=>{_(e),L(!0),Q(!0)},apiBaseUrl:X})]})]})}}}]);
//# sourceMappingURL=348.f3dd7e4c.chunk.js.map